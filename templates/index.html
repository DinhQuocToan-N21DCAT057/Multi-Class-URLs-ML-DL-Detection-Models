{% extends "base.html" %}

{% block title %}Trang chủ - URL Multi-Labels Detection{% endblock %}

{% block content %}
<div class="container-fluid dashboard-container">
    <div class="row">
        <!-- Welcome Section -->
        <div class="col-12">
            <div class="welcome-card glass-card">
                <div class="text-center">
                    <i class="fas fa-shield-alt welcome-icon"></i>
                    <h1 class="display-4 fw-bold mb-3">Hệ thống phát hiện URL độc hại</h1>
                    <p class="lead text-muted">
                        Sử dụng công nghệ học sâu để phân loại đa nhãn các URL độc hại một cách chính xác và nhanh chóng
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Quick Actions -->
        <div class="col-lg-8">
            <div class="glass-card">
                <h3 class="card-title">
                    <i class="fas fa-bolt me-2 text-primary"></i>
                    Thao tác nhanh
                </h3>

                <div class="row g-3">
                    <div class="col-md-6">
                        <a href="{{ url_for('main.quick_prediction') }}" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="action-content">
                                <h5>Dự đoán nhanh</h5>
                                <p>Kiểm tra URL với mô hình tốt nhất</p>
                            </div>
                        </a>
                    </div>

                    <div class="col-md-6">
                        <a href="{{ url_for('main.multi_model_prediction') }}" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <div class="action-content">
                                <h5>So sánh mô hình</h5>
                                <p>Kiểm tra với nhiều mô hình khác nhau</p>
                            </div>
                        </a>
                    </div>

                    <div class="col-md-6">
                        <a href="{{ url_for('main.analysis_dashboard') }}" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div class="action-content">
                                <h5>Phân tích chi tiết</h5>
                                <p>Xem các chỉ số và biểu đồ phân tích</p>
                            </div>
                        </a>
                    </div>

                    <div class="col-md-6">
                        <a href="{{ url_for('main.history') }}" class="action-card">
                            <div class="action-icon">
                                <i class="fas fa-history"></i>
                            </div>
                            <div class="action-content">
                                <h5>Lịch sử dự đoán</h5>
                                <p>Xem các URL đã được kiểm tra</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="col-lg-4">
            <div class="glass-card">
                <h3 class="card-title">
                    <i class="fas fa-chart-pie me-2 text-primary"></i>
                    Thống kê hệ thống
                </h3>

                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-icon bg-success">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="safeCount">-</div>
                            <div class="stat-label">URL An toàn</div>
                        </div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-icon bg-danger">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="maliciousCount">-</div>
                            <div class="stat-label">URL Độc hại</div>
                        </div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-icon bg-primary">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalCount">-</div>
                            <div class="stat-label">Tổng kiểm tra</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Model Information -->
    <div class="row">
        <div class="col-12">
            <div class="glass-card">
                <h3 class="card-title">
                    <i class="fas fa-brain me-2 text-primary"></i>
                    Các mô hình học sâu
                </h3>

                <div class="row">
                    <div class="col-md-4">
                        <div class="model-card">
                            <div class="model-icon">
                                <i class="fas fa-network-wired"></i>
                            </div>
                            <h5>CNN Model</h5>
                            <p>Mạng neural tích chập cho phân tích chuỗi URL và đặc trưng số</p>
                            <div class="model-metrics">
                                <small class="text-muted">Độ chính xác cao trong phân loại phishing</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="model-card">
                            <div class="model-icon">
                                <i class="fas fa-tree"></i>
                            </div>
                            <h5>XGBoost</h5>
                            <p>Thuật toán gradient boosting tối ưu cho dữ liệu có cấu trúc</p>
                            <div class="model-metrics">
                                <small class="text-muted">Tốc độ xử lý nhanh và hiệu quả cao</small>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="model-card">
                            <div class="model-icon">
                                <i class="fas fa-forest"></i>
                            </div>
                            <h5>Random Forest</h5>
                            <p>Mô hình ensemble learning với khả năng tổng quát hóa tốt</p>
                            <div class="model-metrics">
                                <small class="text-muted">Ổn định và ít bị overfitting</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
// Load statistics on page load
document.addEventListener('DOMContentLoaded', function() {
    loadSystemStats();
});

function loadSystemStats() {
    fetch('/api/stats')
        .then(response => response.json())
        .then(data => {
            document.getElementById('safeCount').textContent = data.safe_count || 0;
            document.getElementById('maliciousCount').textContent = data.malicious_count || 0;
            document.getElementById('totalCount').textContent = data.total_predictions || 0;
        })
        .catch(error => {
            console.error('Error loading stats:', error);
            document.getElementById('safeCount').textContent = '0';
            document.getElementById('maliciousCount').textContent = '0';
            document.getElementById('totalCount').textContent = '0';
        });
}
</script>
{% endblock %}
